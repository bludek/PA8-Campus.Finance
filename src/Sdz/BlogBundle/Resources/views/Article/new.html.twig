{% extends 'SdzBlogBundle::layout.html.twig' %}

{% block title %}Article creation{% endblock %}

{% block body %}

{{ parent() }}

<div class="holder_content1">
   
   	<section class="group4">
		<h1>Article creation</h1>

   		<article>
   		<form action="{{ path('article_create') }}" method="post" {{ form_enctype(form) }}>
			{{ form_errors(form) }}
  			{{ form_widget(form) }}
  			<a href="#" id="add_tag"><span class="button2">Ajouter un tag</span></a>

			<script type="text/javascript">
				$(document).ready(function()  {
    				// On récupère la balise <div> en question qui contient l'attribut « data-prototype » qui nous intéresse.
    				var $container = $('#sdz_blogbundle_articletype_tags');
	
    				// On définit une fonction qui va ajouter un champ.
    				function add_tag()  {
        				// On définit le numéro du champ (en comptant le nombre de champs déjà ajoutés).
        					index = $container.children().length;

        		// On ajoute à la fin de la balise <div> le contenu de l'attribut « data-prototype »,
        		// après avoir remplacé la variable $$name$$ qu'il contient par le numéro du champ.
        		$container.append(
            		$($container.attr('data-prototype').replace(/\$\$name\$\$/g, index))
        			);
    				}
  	  				// On ajoute un premier champ directement s'il n'en existe pas déjà un.
    				if($container.children().length == 0) {	add_tag(); }
	
    				// On ajoute un nouveau champ à chaque clic sur le lien d'ajout.
   	 				$('#add_tag').click(function() { add_tag(); });
				});
			</script>
    
		<button type="submit" class="co-button co-button-submit">Create</button>
		</form>
		<a href="{{ path('article') }}"><span class="button2"><p>Back to the list</p></span></a>
   		</article> 
   </section>

</div>
{% endblock %}
